<div>
    <h4>Forms Management</h4>
</div>
<div *ngFor="let alert of alerts">
    <div class="alert alert-dismissible fade show" [ngClass]="alert.type">
        {{alert.text}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
</div>
<p-table [value]="page.content" [lazy]="true" (onLazyLoad)="load($event)" [paginator]="true" 
    [rows]="10" [totalRecords]="page.numberOfElements" [loading]="loading" [showCurrentPageReport]="true" 
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[10,25,50]"
    [globalFilterFields]="['id','name']">
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="id">
                ID <p-sortIcon field="id"></p-sortIcon> <p-columnFilter type="numeric" field="id" display="menu"></p-columnFilter>
            </th>
            <th pSortableColumn="name">
                Name <p-sortIcon field="name"></p-sortIcon> <p-columnFilter type="text" field="name" display="menu"></p-columnFilter>
            </th>
            <th pSortableColumn="latestVersion">
                Latest Version <p-sortIcon field="latestVersion"></p-sortIcon>
            </th>
            <th pSortableColumn="activeVersion">
                Active Version <p-sortIcon field="activeVersion"></p-sortIcon>
            </th>
            <th class="text-end">
                <p-button label="New Form" icon="pi pi-plus" iconPos="left" routerLink="editor"></p-button>
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
        <tr>
            <td>{{item.id}}</td>
            <td>{{item.name}}</td>
            <td>{{item.latestVersion}}</td>
            <td>{{item.activeVersion}}</td>
            <td class="text-end">
                <p-button icon="pi pi-edit" class="p-button-warning p-button-rounded" routerLink="editor" [queryParams]="{id: item.id}"></p-button>
                <p-button icon="pi pi-times" class="p-button-danger p-button-rounded" (click)="delete($event, item)"></p-button>
                <p-confirmPopup [key]="item.id" ></p-confirmPopup>
            </td>
        </tr>
    </ng-template>
</p-table>